<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø´Ù‚Ù‚</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="_sdk/data_sdk.js"></script>
  <script src="_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    .status-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 600;
    }
    
    .tab-button {
      padding: 0.75rem 1.5rem;
      border: none;
      background: transparent;
      cursor: pointer;
      font-weight: 600;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
    }
    
    .tab-button.active {
      border-bottom-color: currentColor;
    }
    
    .card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 1rem;
    }
    
    .stat-card {
      text-align: center;
      padding: 1.5rem;
      border-radius: 12px;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .stat-number {
      font-size: 2.5rem;
      font-weight: bold;
      margin: 0.5rem 0;
    }
    
    .stat-label {
      font-size: 0.875rem;
      opacity: 0.7;
    }
    
    input, select, textarea {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #3b82f6;
    }
    
    button {
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .btn-primary {
      background: #3b82f6;
      color: white;
    }
    
    .btn-primary:hover:not(:disabled) {
      background: #2563eb;
    }
    
    .btn-secondary {
      background: #6b7280;
      color: white;
    }
    
    .btn-secondary:hover:not(:disabled) {
      background: #4b5563;
    }
    
    .btn-success {
      background: #10b981;
      color: white;
    }
    
    .btn-success:hover:not(:disabled) {
      background: #059669;
    }
    
    .btn-danger {
      background: #ef4444;
      color: white;
    }
    
    .btn-danger:hover:not(:disabled) {
      background: #dc2626;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      max-width: 600px;
      width: 90%;
      max-height: 90%;
      overflow-y: auto;
    }
    
    .form-group {
      margin-bottom: 1rem;
    }
    
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }
    
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .checkbox-group input[type="checkbox"] {
      width: auto;
    }
    
    .table-container {
      overflow-x: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 12px;
      overflow: hidden;
    }
    
    th {
      background: #f3f4f6;
      padding: 1rem;
      text-align: right;
      font-weight: 600;
    }
    
    td {
      padding: 1rem;
      border-top: 1px solid #e5e7eb;
    }
    
    tr:hover {
      background: #f9fafb;
    }
    
    .loading {
      opacity: 0.6;
      pointer-events: none;
    }
    
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: #1f2937;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 2000;
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full" style="background: #f3f4f6; overflow-y: auto;"><!-- Header -->
   <header style="background: #1f2937; color: white; padding: 1.5rem 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
    <h1 id="system-title" style="font-size: 1.875rem; font-weight: bold; margin: 0;">Ù†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø´Ù‚Ù‚</h1>
    <p style="opacity: 0.8; margin-top: 0.25rem;">Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø®Ù…Ø³Ø©</p>
   </header><!-- Navigation Tabs -->
   <nav style="background: white; padding: 0 2rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
    <div style="display: flex; gap: 1rem;"><button class="tab-button active" data-tab="dashboard" style="color: #3b82f6;"> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… </button> <button class="tab-button" data-tab="bookings" style="color: #6b7280;"> Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª </button> <button class="tab-button" data-tab="delivery" style="color: #6b7280;"> Ø§Ù„ØªÙˆØµÙŠÙ„ </button> <button class="tab-button" data-tab="units" style="color: #6b7280;"> Ø§Ù„Ø´Ù‚Ù‚ </button> <button class="tab-button" data-tab="cleaning" style="color: #6b7280;"> Ø§Ù„ØªÙ†Ø¸ÙŠÙ </button> <button class="tab-button" data-tab="inspection" style="color: #6b7280;"> Ø§Ù„ØªÙØªÙŠØ´ </button> <button class="tab-button" data-tab="inventory" style="color: #6b7280;"> Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª </button>
    </div>
   </nav><!-- Main Content -->
   <main style="padding: 2rem; max-width: 1400px; margin: 0 auto;"><!-- Dashboard Tab -->
    <div id="dashboard-tab" class="tab-content">
     <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
      <div class="stat-card">
       <div class="stat-label">
        Ø´Ù‚Ù‚ Ø¬Ø§Ù‡Ø²Ø©
       </div>
       <div class="stat-number" id="ready-count" style="color: #10b981;">
        0
       </div>
      </div>
      <div class="stat-card">
       <div class="stat-label">
        ØªØ­ØªØ§Ø¬ ØªÙ†Ø¸ÙŠÙ
       </div>
       <div class="stat-number" id="cleaning-count" style="color: #ef4444;">
        0
       </div>
      </div>
      <div class="stat-card">
       <div class="stat-label">
        Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…
       </div>
       <div class="stat-number" id="checkin-count" style="color: #3b82f6;">
        0
       </div>
      </div>
      <div class="stat-card">
       <div class="stat-label">
        Ø®Ø±ÙˆØ¬ Ø§Ù„ÙŠÙˆÙ…
       </div>
       <div class="stat-number" id="checkout-count" style="color: #f59e0b;">
        0
       </div>
      </div>
      <div class="stat-card">
       <div class="stat-label">
        Ù…Ù‡Ø§Ù… ØªÙ†Ø¸ÙŠÙ
       </div>
       <div class="stat-number" id="tasks-count" style="color: #8b5cf6;">
        0
       </div>
      </div>
     </div>
     <div class="card">
      <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h2>
      <div id="today-bookings" style="min-height: 100px;"></div>
     </div>
     <div class="card">
      <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">Ù†ÙˆØ§Ù‚Øµ Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª</h2>
      <div id="low-inventory" style="min-height: 100px;"></div>
     </div>
    </div><!-- Bookings Tab -->
    <div id="bookings-tab" class="tab-content" style="display: none;">
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
      <h2 style="font-size: 1.5rem; font-weight: bold;">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</h2><button class="btn-primary" onclick="openBookingModal()">+ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯</button>
     </div>
     <div class="card">
      <div class="table-container">
       <table id="bookings-table">
        <thead>
         <tr>
          <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</th>
          <th>Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±</th>
          <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
          <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯Ø®ÙˆÙ„</th>
          <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø±ÙˆØ¬</th>
          <th>Ø§Ù„Ø¶ÙŠÙˆÙ</th>
          <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
          <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
         </tr>
        </thead>
        <tbody id="bookings-body"></tbody>
       </table>
      </div>
     </div>
    </div><!-- Units Tab -->
    <div id="units-tab" class="tab-content" style="display: none;">
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
      <h2 style="font-size: 1.5rem; font-weight: bold;">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ù‚Ù‚</h2><button class="btn-primary" onclick="openUnitModal()">+ Ø´Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
     </div>
     <div class="card">
      <div class="table-container">
       <table id="units-table">
        <thead>
         <tr>
          <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</th>
          <th>Ø§Ù„Ù†ÙˆØ¹</th>
          <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>Ø¢Ø®Ø± ØªÙ†Ø¸ÙŠÙ</th>
          <th>Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø­Ø¬Ø²</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
         </tr>
        </thead>
        <tbody id="units-body"></tbody>
       </table>
      </div>
     </div>
    </div><!-- Cleaning Tab -->
    <div id="cleaning-tab" class="tab-content" style="display: none;">
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
      <h2 style="font-size: 1.5rem; font-weight: bold;">Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ†Ø¸ÙŠÙ</h2><button class="btn-primary" onclick="openCleaningModal()">+ Ù…Ù‡Ù…Ø© ØªÙ†Ø¸ÙŠÙ</button>
     </div>
     <div class="card">
      <div class="table-container">
       <table id="cleaning-table">
        <thead>
         <tr>
          <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</th>
          <th>Ø§Ù„Ø³Ø¨Ø¨</th>
          <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
          <th>Ø§Ù„Ø¨Ø¯Ø¡</th>
          <th>Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th>
          <th>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</th>
          <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
         </tr>
        </thead>
        <tbody id="cleaning-body"></tbody>
       </table>
      </div>
     </div>
    </div><!-- Inspection Tab -->
    <div id="inspection-tab" class="tab-content" style="display: none;">
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
      <h2 style="font-size: 1.5rem; font-weight: bold;">Ø³Ø¬Ù„ Ø§Ù„ØªÙØªÙŠØ´</h2><button class="btn-primary" onclick="openInspectionModal()">+ ØªÙØªÙŠØ´ Ø¬Ø¯ÙŠØ¯</button>
     </div>
     <div class="card">
      <div class="table-container">
       <table id="inspection-table">
        <thead>
         <tr>
          <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</th>
          <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
          <th>Wi-Fi</th>
          <th>Ø§Ù„Ù†Ø¸Ø§ÙØ©</th>
          <th>Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª</th>
          <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
          <th>Ù…Ø¹ØªÙ…Ø¯Ø©</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
         </tr>
        </thead>
        <tbody id="inspection-body"></tbody>
       </table>
      </div>
     </div>
    </div><!-- Delivery Tab -->
    <div id="delivery-tab" class="tab-content" style="display: none;">
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
      <h2 style="font-size: 1.5rem; font-weight: bold;">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØµÙŠÙ„</h2><button class="btn-primary" onclick="openDeliveryModal()">+ Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
     </div>
     <div class="card">
      <div class="table-container">
       <table id="delivery-table">
        <thead>
         <tr>
          <th>Ø§Ù„Ø§Ø³Ù…</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</th>
          <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</th>
          <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
          <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</th>
          <th>ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</th>
          <th>ÙˆÙ‚Øª Ø§Ù„Ø®Ø±ÙˆØ¬</th>
          <th>Ø­Ø§Ù„Ø© Ø§Ù„ØªÙˆØµÙŠÙ„</th>
          <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
         </tr>
        </thead>
        <tbody id="delivery-body"></tbody>
       </table>
      </div>
     </div>
    </div><!-- Inventory Tab -->
    <div id="inventory-tab" class="tab-content" style="display: none;">
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
      <h2 style="font-size: 1.5rem; font-weight: bold;">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª</h2>
      <div style="display: flex; gap: 1rem;"><button class="btn-success" onclick="openSetupModal()">âš¡ Ø¥Ø¹Ø¯Ø§Ø¯ Ø´Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</button> <button class="btn-primary" onclick="openInventoryModal()">+ ØµÙ†Ù Ù…Ø®ØµØµ</button>
      </div>
     </div><!-- Filters -->
     <div class="card" style="margin-bottom: 1.5rem;">
      <h3 style="font-size: 1.125rem; font-weight: bold; margin-bottom: 1rem;">ğŸ” ØªØµÙÙŠØ© Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª</h3>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
       <div class="form-group" style="margin-bottom: 0;"><label for="filter-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label> <select id="filter-location" onchange="renderInventory()"> <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹</option> <option value="aster">aster</option> <option value="vantage">vantage</option> <option value="sky">sky</option> <option value="lumos">lumos</option> <option value="lumont">lumont</option> </select>
       </div>
       <div class="form-group" style="margin-bottom: 0;"><label for="filter-unit">Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</label> <select id="filter-unit" onchange="renderInventory()"> <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ù‚Ù‚</option> </select>
       </div>
       <div class="form-group" style="margin-bottom: 0;"><label for="filter-category">Ø§Ù„ÙØ¦Ø©</label> <select id="filter-category" onchange="renderInventory()"> <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option> <option value="Bedroom">ğŸ›ï¸ Bedroom</option> <option value="Bathroom">ğŸš¿ Bathroom</option> <option value="Kitchen">ğŸ½ï¸ Kitchen</option> <option value="Cleaning Supplies">ğŸ§¼ Cleaning Supplies</option> <option value="Guest Essentials">âœ¨ Guest Essentials</option> </select>
       </div>
       <div class="form-group" style="margin-bottom: 0;"><label>ÙŠØ­ØªØ§Ø¬ ØªØ¹Ø¨Ø¦Ø© ÙÙ‚Ø·</label>
        <div class="checkbox-group"><input type="checkbox" id="filter-needs-refill" onchange="renderInventory()"> <label for="filter-needs-refill" style="margin: 0;">Ø¹Ø±Ø¶ Ø§Ù„Ù†ÙˆØ§Ù‚Øµ ÙÙ‚Ø·</label>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="table-container">
       <table id="inventory-table">
        <thead>
         <tr>
          <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</th>
          <th>Ø§Ù„ÙØ¦Ø©</th>
          <th>Ø§Ù„ØµÙ†Ù</th>
          <th>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</th>
          <th>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>
          <th>ÙŠØ­ØªØ§Ø¬ ØªØ¹Ø¨Ø¦Ø©</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
         </tr>
        </thead>
        <tbody id="inventory-body"></tbody>
       </table>
      </div>
     </div>
    </div>
   </main><!-- Modals --> <!-- Booking Modal -->
   <div id="booking-modal" class="modal">
    <div class="modal-content">
     <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯</h2>
     <form id="booking-form" onsubmit="saveBooking(event)">
      <div class="form-group"><label for="booking-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label> <select id="booking-location" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹</option> <option value="aster">aster</option> <option value="vantage">vantage</option> <option value="sky">sky</option> <option value="lumos">lumos</option> <option value="lumont">lumont</option> </select>
      </div>
      <div class="form-group"><label for="booking-unit">Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</label> <input type="text" id="booking-unit" required>
      </div>
      <div class="form-group"><label for="booking-guest">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±</label> <input type="text" id="booking-guest" required>
      </div>
      <div class="form-group"><label for="booking-phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label> <input type="tel" id="booking-phone" required>
      </div>
      <div class="form-group"><label for="booking-address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label> <textarea id="booking-address" rows="2" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø·Ù„ÙˆØ¨"></textarea>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
       <div class="form-group"><label for="booking-checkin-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯Ø®ÙˆÙ„</label> <input type="date" id="booking-checkin-date" required>
       </div>
       <div class="form-group"><label for="booking-checkin-time">ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</label> <input type="time" id="booking-checkin-time" value="15:00" required>
       </div>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
       <div class="form-group"><label for="booking-checkout-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø±ÙˆØ¬</label> <input type="date" id="booking-checkout-date" required>
       </div>
       <div class="form-group"><label for="booking-checkout-time">ÙˆÙ‚Øª Ø§Ù„Ø®Ø±ÙˆØ¬</label> <input type="time" id="booking-checkout-time" value="11:00" required>
       </div>
      </div>
      <div class="form-group"><label for="booking-guests">Ø¹Ø¯Ø¯ Ø§Ù„Ø¶ÙŠÙˆÙ</label> <input type="number" id="booking-guests" min="1" value="1" required>
      </div>
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;"><button type="submit" class="btn-primary" style="flex: 1;">Ø­ÙØ¸</button> <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeModal('booking-modal')">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
     </form>
    </div>
   </div><!-- Unit Modal -->
   <div id="unit-modal" class="modal">
    <div class="modal-content">
     <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">Ø´Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
     <form id="unit-form" onsubmit="saveUnit(event)">
      <div class="form-group"><label for="unit-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label> <select id="unit-location" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹</option> <option value="aster">aster</option> <option value="vantage">vantage</option> <option value="sky">sky</option> <option value="lumos">lumos</option> <option value="lumont">lumont</option> </select>
      </div>
      <div class="form-group"><label for="unit-number">Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</label> <input type="text" id="unit-number" required>
      </div>
      <div class="form-group"><label for="unit-type">Ù†ÙˆØ¹ Ø§Ù„Ø´Ù‚Ø©</label> <select id="unit-type" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option> <option value="Studio">Studio</option> <option value="1BR">1BR</option> <option value="2BR">2BR</option> <option value="3BR">3BR</option> </select>
      </div>
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;"><button type="submit" class="btn-primary" style="flex: 1;">Ø­ÙØ¸</button> <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeModal('unit-modal')">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
     </form>
    </div>
   </div><!-- Cleaning Modal -->
   <div id="cleaning-modal" class="modal">
    <div class="modal-content">
     <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">Ù…Ù‡Ù…Ø© ØªÙ†Ø¸ÙŠÙ Ø¬Ø¯ÙŠØ¯Ø©</h2>
     <form id="cleaning-form" onsubmit="saveCleaning(event)">
      <div class="form-group"><label for="cleaning-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label> <select id="cleaning-location" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹</option> <option value="aster">aster</option> <option value="vantage">vantage</option> <option value="sky">sky</option> <option value="lumos">lumos</option> <option value="lumont">lumont</option> </select>
      </div>
      <div class="form-group"><label for="cleaning-unit">Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</label> <input type="text" id="cleaning-unit" required>
      </div>
      <div class="form-group"><label for="cleaning-reason">Ø³Ø¨Ø¨ Ø§Ù„ØªÙ†Ø¸ÙŠÙ</label> <select id="cleaning-reason" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ø¨Ø¨</option> <option value="Check-out Cleaning">Check-out Cleaning</option> <option value="Stayover Cleaning">Stayover Cleaning</option> <option value="Deep Cleaning">Deep Cleaning</option> <option value="After Maintenance">After Maintenance</option> </select>
      </div>
      <div class="form-group"><label for="cleaning-date">Ø§Ù„ØªØ§Ø±ÙŠØ®</label> <input type="date" id="cleaning-date" required>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
       <div class="form-group"><label for="cleaning-start">ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡</label> <input type="time" id="cleaning-start" required>
       </div>
       <div class="form-group"><label for="cleaning-end">ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</label> <input type="time" id="cleaning-end">
       </div>
      </div>
      <div class="form-group"><label for="cleaning-cleaner">Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</label> <input type="text" id="cleaning-cleaner">
      </div>
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;"><button type="submit" class="btn-primary" style="flex: 1;">Ø­ÙØ¸</button> <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeModal('cleaning-modal')">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
     </form>
    </div>
   </div><!-- Inspection Modal -->
   <div id="inspection-modal" class="modal">
    <div class="modal-content">
     <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">ØªÙØªÙŠØ´ Ø¬Ø¯ÙŠØ¯</h2>
     <form id="inspection-form" onsubmit="saveInspection(event)">
      <div class="form-group"><label for="inspection-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label> <select id="inspection-location" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹</option> <option value="aster">aster</option> <option value="vantage">vantage</option> <option value="sky">sky</option> <option value="lumos">lumos</option> <option value="lumont">lumont</option> </select>
      </div>
      <div class="form-group"><label for="inspection-unit">Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</label> <input type="text" id="inspection-unit" required>
      </div>
      <div class="form-group"><label for="inspection-date">Ø§Ù„ØªØ§Ø±ÙŠØ®</label> <input type="date" id="inspection-date" required>
      </div>
      <div class="checkbox-group form-group"><input type="checkbox" id="inspection-wifi"> <label for="inspection-wifi" style="margin: 0;">Wi-Fi ÙŠØ¹Ù…Ù„</label>
      </div>
      <div class="checkbox-group form-group"><input type="checkbox" id="inspection-clean"> <label for="inspection-clean" style="margin: 0;">Ø§Ù„Ù†Ø¸Ø§ÙØ© Ù…Ù…ØªØ§Ø²Ø©</label>
      </div>
      <div class="checkbox-group form-group"><input type="checkbox" id="inspection-supplies"> <label for="inspection-supplies" style="margin: 0;">Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª ÙƒØ§Ù…Ù„Ø©</label>
      </div>
      <div class="form-group"><label for="inspection-notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label> <textarea id="inspection-notes" rows="3"></textarea>
      </div>
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;"><button type="submit" class="btn-primary" style="flex: 1;">Ø­ÙØ¸</button> <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeModal('inspection-modal')">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
     </form>
    </div>
   </div><!-- Inventory Modal -->
   <div id="inventory-modal" class="modal">
    <div class="modal-content">
     <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">ØµÙ†Ù Ù…Ø®ØµØµ</h2>
     <form id="inventory-form" onsubmit="saveInventory(event)">
      <div class="form-group"><label for="inventory-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label> <select id="inventory-location" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹</option> <option value="aster">aster</option> <option value="vantage">vantage</option> <option value="sky">sky</option> <option value="lumos">lumos</option> <option value="lumont">lumont</option> </select>
      </div>
      <div class="form-group"><label for="inventory-unit">Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</label> <input type="text" id="inventory-unit" required>
      </div>
      <div class="form-group"><label for="inventory-category">Ø§Ù„ÙØ¦Ø©</label> <select id="inventory-category" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option> <option value="Bedroom">ğŸ›ï¸ Bedroom</option> <option value="Bathroom">ğŸš¿ Bathroom</option> <option value="Kitchen">ğŸ½ï¸ Kitchen</option> <option value="Cleaning Supplies">ğŸ§¼ Cleaning Supplies</option> <option value="Guest Essentials">âœ¨ Guest Essentials</option> </select>
      </div>
      <div class="form-group"><label for="inventory-item">Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</label> <input type="text" id="inventory-item" required>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
       <div class="form-group"><label for="inventory-current">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label> <input type="number" id="inventory-current" min="0" value="0" required>
       </div>
       <div class="form-group"><label for="inventory-minimum">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</label> <input type="number" id="inventory-minimum" min="0" value="1" required>
       </div>
      </div>
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;"><button type="submit" class="btn-primary" style="flex: 1;">Ø­ÙØ¸</button> <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeModal('inventory-modal')">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
     </form>
    </div>
   </div><!-- Setup Unit Modal -->
   <div id="setup-modal" class="modal">
    <div class="modal-content" style="max-width: 800px;">
     <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">âš¡ Ø¥Ø¹Ø¯Ø§Ø¯ Ø´Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø© - Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ©</h2>
     <form id="setup-form" onsubmit="setupUnitInventory(event)">
      <div class="form-group"><label for="setup-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label> <select id="setup-location" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹</option> <option value="aster">aster</option> <option value="vantage">vantage</option> <option value="sky">sky</option> <option value="lumos">lumos</option> <option value="lumont">lumont</option> </select>
      </div>
      <div class="form-group"><label for="setup-unit">Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</label> <input type="text" id="setup-unit" required>
      </div>
      <div style="margin-top: 1.5rem; padding: 1rem; background: #f9fafb; border-radius: 8px;">
       <p style="font-weight: 600; margin-bottom: 1rem;">Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:</p>
       <div style="margin-bottom: 1rem;">
        <h3 style="font-weight: bold; margin-bottom: 0.5rem;">ğŸ›ï¸ Bedroom (4 Ø£ØµÙ†Ø§Ù)</h3>
        <ul style="margin: 0; padding-right: 1.5rem;">
         <li>Bed Sheets Sets (2)</li>
         <li>Pillows (4)</li>
         <li>Extra Blanket (1)</li>
         <li>Hangers (15)</li>
        </ul>
       </div>
       <div style="margin-bottom: 1rem;">
        <h3 style="font-weight: bold; margin-bottom: 0.5rem;">ğŸš¿ Bathroom (8 Ø£ØµÙ†Ø§Ù)</h3>
        <ul style="margin: 0; padding-right: 1.5rem;">
         <li>Bath Towels (4)</li>
         <li>Hand Towels (4)</li>
         <li>Bath Mat (2)</li>
         <li>Shampoo Bottles (2)</li>
         <li>Conditioner Bottles (2)</li>
         <li>Hand Soap (2)</li>
         <li>Hair Dryer (1)</li>
         <li>Trash Bags Roll (1)</li>
        </ul>
       </div>
       <div style="margin-bottom: 1rem;">
        <h3 style="font-weight: bold; margin-bottom: 0.5rem;">ğŸ½ï¸ Kitchen (10 Ø£ØµÙ†Ø§Ù)</h3>
        <ul style="margin: 0; padding-right: 1.5rem;">
         <li>Dinner Plates (8)</li>
         <li>Cups/Mugs (8)</li>
         <li>Cutlery Set (8)</li>
         <li>Cooking Pots (2)</li>
         <li>Frying Pan (1)</li>
         <li>Electric Kettle (1)</li>
         <li>Coffee Machine (1)</li>
         <li>Coffee Packs (3)</li>
         <li>Tea Bags Box (1)</li>
         <li>Sugar Pack (1)</li>
        </ul>
       </div>
       <div style="margin-bottom: 1rem;">
        <h3 style="font-weight: bold; margin-bottom: 0.5rem;">ğŸ§¼ Cleaning Supplies (6 Ø£ØµÙ†Ø§Ù)</h3>
        <ul style="margin: 0; padding-right: 1.5rem;">
         <li>Floor Cleaner Bottle (1)</li>
         <li>Disinfectant Spray (1)</li>
         <li>Mop (1)</li>
         <li>Broom (1)</li>
         <li>Sponges Pack (1)</li>
         <li>Cleaning Gloves (2 pairs)</li>
        </ul>
       </div>
       <div style="margin-bottom: 0;">
        <h3 style="font-weight: bold; margin-bottom: 0.5rem;">âœ¨ Guest Essentials (3 Ø£ØµÙ†Ø§Ù)</h3>
        <ul style="margin: 0; padding-right: 1.5rem;">
         <li>Toilet Paper Rolls (6)</li>
         <li>Paper Towels Roll (2)</li>
         <li>Tissues Box (2)</li>
        </ul>
       </div>
       <div style="margin-top: 1rem; padding: 0.75rem; background: #dbeafe; border-radius: 6px; color: #1e40af;"><strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 33 ØµÙ†Ù</strong>
       </div>
      </div>
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;"><button type="submit" class="btn-success" style="flex: 1;">âš¡ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø´Ù‚Ø©</button> <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeModal('setup-modal')">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
     </form>
    </div>
   </div><!-- Delivery Modal -->
   <div id="delivery-modal" class="modal">
    <div class="modal-content" style="max-width: 700px;">
     <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h2>
     <form id="delivery-form" onsubmit="saveDelivery(event)">
      <div class="form-group"><label for="delivery-booking">Ø±Ø¨Ø· Ø¨Ø­Ø¬Ø² Ù…ÙˆØ¬ÙˆØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label> <select id="delivery-booking" onchange="fillDeliveryFromBooking()"> <option value="">Ø§Ø®ØªØ± Ø­Ø¬Ø² (Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙŠØ¯)</option> </select>
      </div>
      <div class="form-group"><label for="delivery-name">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label> <input type="text" id="delivery-name" required>
      </div>
      <div class="form-group"><label for="delivery-phone">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label> <input type="tel" id="delivery-phone" required>
      </div>
      <div class="form-group"><label for="delivery-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label> <select id="delivery-location" required> <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹</option> <option value="aster">aster</option> <option value="vantage">vantage</option> <option value="sky">sky</option> <option value="lumos">lumos</option> <option value="lumont">lumont</option> </select>
      </div>
      <div class="form-group"><label for="delivery-unit">Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</label> <input type="text" id="delivery-unit" required>
      </div>
      <div class="form-group"><label for="delivery-address">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„</label> <textarea id="delivery-address" rows="3" required placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„ØªÙˆØµÙŠÙ„"></textarea>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
       <div class="form-group"><label for="delivery-checkin-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø² (Ø¯Ø®ÙˆÙ„)</label> <input type="date" id="delivery-checkin-date" required>
       </div>
       <div class="form-group"><label for="delivery-checkin-time">ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</label> <input type="time" id="delivery-checkin-time" value="15:00" required>
       </div>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
       <div class="form-group"><label for="delivery-checkout-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø±ÙˆØ¬</label> <input type="date" id="delivery-checkout-date" required>
       </div>
       <div class="form-group"><label for="delivery-checkout-time">ÙˆÙ‚Øª Ø§Ù„Ø®Ø±ÙˆØ¬</label> <input type="time" id="delivery-checkout-time" value="11:00" required>
       </div>
      </div>
      <div class="form-group"><label for="delivery-status">Ø­Ø§Ù„Ø© Ø§Ù„ØªÙˆØµÙŠÙ„</label> <select id="delivery-status" required> <option value="Pending">â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</option> <option value="Scheduled">ğŸ“… Ù…Ø¬Ø¯ÙˆÙ„</option> <option value="In Transit">ğŸšš Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„</option> <option value="Delivered">âœ… ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</option> <option value="Cancelled">âŒ Ù…Ù„ØºÙŠ</option> </select>
      </div>
      <div class="form-group"><label for="delivery-notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</label> <textarea id="delivery-notes" rows="3" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø¹Ù† Ø§Ù„ØªÙˆØµÙŠÙ„"></textarea>
      </div>
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;"><button type="submit" class="btn-primary" style="flex: 1;">Ø­ÙØ¸</button> <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeModal('delivery-modal')">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
     </form>
    </div>
   </div><!-- Update Quantity Modal -->
   <div id="update-quantity-modal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
     <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ©</h2>
     <div id="update-item-info" style="margin-bottom: 1rem; padding: 1rem; background: #f9fafb; border-radius: 8px;"></div>
     <form id="update-quantity-form" onsubmit="saveQuantityUpdate(event)">
      <div class="form-group"><label for="new-quantity">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label> <input type="number" id="new-quantity" min="0" required>
      </div>
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;"><button type="submit" class="btn-primary" style="flex: 1;">Ø­ÙØ¸</button> <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeModal('update-quantity-modal')">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
     </form>
    </div>
   </div>
  </div>
  <script>
    let allData = [];
    
    const defaultConfig = {
      system_title: "Ù†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø´Ù‚Ù‚",
      default_checkin_time: "3:00 PM",
      default_checkout_time: "11:00 AM",
      background_color: "#f3f4f6",
      surface_color: "#ffffff",
      text_color: "#1f2937",
      primary_action_color: "#3b82f6",
      secondary_action_color: "#6b7280"
    };
    
    const dataHandler = {
      onDataChanged(data) {
        allData = data;
        updateDashboard();
        renderActiveTab();
      }
    };
    
    async function init() {
      const initResult = await window.dataSdk.init(dataHandler);
      if (!initResult.isOk) {
        showToast("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…");
        return;
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const systemTitle = document.getElementById('system-title');
            if (systemTitle) {
              systemTitle.textContent = config.system_title || defaultConfig.system_title;
            }
            
            const background = config.background_color || defaultConfig.background_color;
            const surface = config.surface_color || defaultConfig.surface_color;
            const text = config.text_color || defaultConfig.text_color;
            const primary = config.primary_action_color || defaultConfig.primary_action_color;
            const secondary = config.secondary_action_color || defaultConfig.secondary_action_color;
            
            document.getElementById('app').style.background = background;
            
            const cards = document.querySelectorAll('.card, .stat-card, .modal-content');
            cards.forEach(card => card.style.background = surface);
            
            const tables = document.querySelectorAll('table');
            tables.forEach(table => table.style.background = surface);
            
            document.body.style.color = text;
            
            const primaryButtons = document.querySelectorAll('.btn-primary');
            primaryButtons.forEach(btn => btn.style.background = primary);
            
            const secondaryButtons = document.querySelectorAll('.btn-secondary');
            secondaryButtons.forEach(btn => btn.style.background = secondary);
            
            const activeTabs = document.querySelectorAll('.tab-button.active');
            activeTabs.forEach(tab => {
              tab.style.color = primary;
              tab.style.borderBottomColor = primary;
            });
          },
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (value) => {
                  config.background_color = value;
                  window.elementSdk.setConfig({ background_color: value });
                }
              },
              {
                get: () => config.surface_color || defaultConfig.surface_color,
                set: (value) => {
                  config.surface_color = value;
                  window.elementSdk.setConfig({ surface_color: value });
                }
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (value) => {
                  config.text_color = value;
                  window.elementSdk.setConfig({ text_color: value });
                }
              },
              {
                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                set: (value) => {
                  config.primary_action_color = value;
                  window.elementSdk.setConfig({ primary_action_color: value });
                }
              },
              {
                get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                set: (value) => {
                  config.secondary_action_color = value;
                  window.elementSdk.setConfig({ secondary_action_color: value });
                }
              }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ["system_title", config.system_title || defaultConfig.system_title],
            ["default_checkin_time", config.default_checkin_time || defaultConfig.default_checkin_time],
            ["default_checkout_time", config.default_checkout_time || defaultConfig.default_checkout_time]
          ])
        });
      }
      
      setupTabs();
      updateDashboard();
    }
    
    function setupTabs() {
      const tabButtons = document.querySelectorAll('.tab-button');
      tabButtons.forEach(button => {
        button.addEventListener('click', () => {
          tabButtons.forEach(btn => {
            btn.classList.remove('active');
            btn.style.color = '#6b7280';
            btn.style.borderBottomColor = 'transparent';
          });
          
          button.classList.add('active');
          button.style.color = '#3b82f6';
          button.style.borderBottomColor = '#3b82f6';
          
          const tabContents = document.querySelectorAll('.tab-content');
          tabContents.forEach(content => content.style.display = 'none');
          
          const tabId = button.dataset.tab + '-tab';
          const activeTab = document.getElementById(tabId);
          if (activeTab) {
            activeTab.style.display = 'block';
            renderActiveTab();
          }
        });
      });
    }
    
    function renderActiveTab() {
      const activeTab = document.querySelector('.tab-button.active');
      if (!activeTab) return;
      
      const tab = activeTab.dataset.tab;
      
      switch(tab) {
        case 'dashboard':
          updateDashboard();
          break;
        case 'bookings':
          renderBookings();
          break;
        case 'units':
          renderUnits();
          break;
        case 'cleaning':
          renderCleaning();
          break;
        case 'inspection':
          renderInspection();
          break;
        case 'inventory':
          renderInventory();
          break;
        case 'delivery':
          renderDelivery();
          break;
      }
    }
    
    function updateDashboard() {
      const units = allData.filter(d => d.type === 'unit');
      const bookings = allData.filter(d => d.type === 'booking');
      const cleaning = allData.filter(d => d.type === 'cleaning');
      const inventory = allData.filter(d => d.type === 'inventory');
      
      const readyUnits = units.filter(u => u.unit_status === 'Ready').length;
      const needsCleaning = units.filter(u => u.unit_status === 'Needs Cleaning').length;
      
      const today = new Date().toISOString().split('T')[0];
      const checkinsToday = bookings.filter(b => b.checkin_date === today).length;
      const checkoutsToday = bookings.filter(b => b.checkout_date === today).length;
      
      const pendingTasks = cleaning.filter(c => c.cleaning_status === 'Pending' || c.cleaning_status === 'In Progress').length;
      
      document.getElementById('ready-count').textContent = readyUnits;
      document.getElementById('cleaning-count').textContent = needsCleaning;
      document.getElementById('checkin-count').textContent = checkinsToday;
      document.getElementById('checkout-count').textContent = checkoutsToday;
      document.getElementById('tasks-count').textContent = pendingTasks;
      
      const todayBookings = bookings.filter(b => b.checkin_date === today || b.checkout_date === today);
      const todayBookingsDiv = document.getElementById('today-bookings');
      if (todayBookings.length === 0) {
        todayBookingsDiv.innerHTML = '<p style="color: #6b7280;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù„Ù„ÙŠÙˆÙ…</p>';
      } else {
        todayBookingsDiv.innerHTML = todayBookings.map(b => `
          <div style="padding: 1rem; border: 2px solid #e5e7eb; border-radius: 8px; margin-bottom: 0.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <strong>${b.guest_name}</strong> - ${b.location} ${b.unit_number}
              </div>
              <div>
                ${b.checkin_date === today ? 'â¬…ï¸ Ø¯Ø®ÙˆÙ„' : 'â¡ï¸ Ø®Ø±ÙˆØ¬'}
              </div>
            </div>
          </div>
        `).join('');
      }
      
      const lowInventory = inventory.filter(i => i.needs_refill);
      const lowInventoryDiv = document.getElementById('low-inventory');
      if (lowInventory.length === 0) {
        lowInventoryDiv.innerHTML = '<p style="color: #6b7280;">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ù…ØªÙˆÙØ±Ø©</p>';
      } else {
        lowInventoryDiv.innerHTML = lowInventory.map(i => `
          <div style="padding: 1rem; border: 2px solid #fbbf24; border-radius: 8px; margin-bottom: 0.5rem; background: #fef3c7;">
            <strong>${i.item_name}</strong> - ${i.location} ${i.unit_number}<br>
            <span style="color: #92400e;">Ø§Ù„ÙƒÙ…ÙŠØ©: ${i.current_quantity} / Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰: ${i.minimum_quantity}</span>
          </div>
        `).join('');
      }
    }
    
    function renderBookings() {
      const bookings = allData.filter(d => d.type === 'booking');
      const tbody = document.getElementById('bookings-body');
      
      if (bookings.length === 0) {
        tbody.innerHTML = '<tr><td colspan="10" style="text-align: center; color: #6b7280;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª</td></tr>';
        return;
      }
      
      tbody.innerHTML = bookings.map(b => `
        <tr>
          <td>${b.location}</td>
          <td>${b.unit_number}</td>
          <td>${b.guest_name}</td>
          <td>${b.guest_phone}</td>
          <td>${b.checkin_date} ${b.checkin_time}</td>
          <td>${b.checkout_date} ${b.checkout_time}</td>
          <td>${b.guest_count}</td>
          <td style="max-width: 200px; word-wrap: break-word;">${b.guest_address || '-'}</td>
          <td>${getBookingStatusBadge(b.booking_status)}</td>
          <td>
            <button class="btn-danger" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="deleteBooking('${b.__backendId}')">Ø­Ø°Ù</button>
          </td>
        </tr>
      `).join('');
    }
    
    function renderUnits() {
      const units = allData.filter(d => d.type === 'unit');
      const tbody = document.getElementById('units-body');
      
      if (units.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #6b7280;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ù‚Ù‚</td></tr>';
        return;
      }
      
      tbody.innerHTML = units.map(u => `
        <tr>
          <td>${u.location}</td>
          <td>${u.unit_number}</td>
          <td>${u.unit_type}</td>
          <td>${getUnitStatusBadge(u.unit_status)}</td>
          <td>${u.last_cleaning || '-'}</td>
          <td>${u.unit_status === 'Ready' ? 'âœ…' : 'âŒ'}</td>
          <td>
            <button class="btn-danger" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="deleteUnit('${u.__backendId}')">Ø­Ø°Ù</button>
          </td>
        </tr>
      `).join('');
    }
    
    function renderCleaning() {
      const cleaning = allData.filter(d => d.type === 'cleaning');
      const tbody = document.getElementById('cleaning-body');
      
      if (cleaning.length === 0) {
        tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #6b7280;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… ØªÙ†Ø¸ÙŠÙ</td></tr>';
        return;
      }
      
      tbody.innerHTML = cleaning.map(c => `
        <tr>
          <td>${c.location}</td>
          <td>${c.unit_number}</td>
          <td>${c.cleaning_reason}</td>
          <td>${c.cleaning_date}</td>
          <td>${c.start_time}</td>
          <td>${c.end_time || '-'}</td>
          <td>${c.cleaner_name || '-'}</td>
          <td>${getCleaningStatusBadge(c.cleaning_status)}</td>
          <td>
            <button class="btn-danger" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="deleteCleaning('${c.__backendId}')">Ø­Ø°Ù</button>
          </td>
        </tr>
      `).join('');
    }
    
    function renderInspection() {
      const inspections = allData.filter(d => d.type === 'inspection');
      const tbody = document.getElementById('inspection-body');
      
      if (inspections.length === 0) {
        tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #6b7280;">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙØªÙŠØ´Ø§Øª</td></tr>';
        return;
      }
      
      tbody.innerHTML = inspections.map(i => `
        <tr>
          <td>${i.location}</td>
          <td>${i.unit_number}</td>
          <td>${i.inspection_date}</td>
          <td>${i.wifi_ok ? 'âœ…' : 'âŒ'}</td>
          <td>${i.cleanliness_ok ? 'âœ…' : 'âŒ'}</td>
          <td>${i.supplies_ok ? 'âœ…' : 'âŒ'}</td>
          <td>${i.inspection_notes || '-'}</td>
          <td>${i.approved ? 'âœ…' : 'âŒ'}</td>
          <td>
            <button class="btn-danger" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="deleteInspection('${i.__backendId}')">Ø­Ø°Ù</button>
          </td>
        </tr>
      `).join('');
    }
    
    function renderInventory() {
      let inventory = allData.filter(d => d.type === 'inventory');
      
      const locationFilter = document.getElementById('filter-location').value;
      const unitFilter = document.getElementById('filter-unit').value;
      const categoryFilter = document.getElementById('filter-category').value;
      const needsRefillOnly = document.getElementById('filter-needs-refill').checked;
      
      if (locationFilter) {
        inventory = inventory.filter(i => i.location === locationFilter);
      }
      if (unitFilter) {
        inventory = inventory.filter(i => i.unit_number === unitFilter);
      }
      if (categoryFilter) {
        inventory = inventory.filter(i => i.category === categoryFilter);
      }
      if (needsRefillOnly) {
        inventory = inventory.filter(i => i.needs_refill);
      }
      
      updateFilterUnits();
      
      const tbody = document.getElementById('inventory-body');
      
      if (inventory.length === 0) {
        tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #6b7280;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù</td></tr>';
        return;
      }
      
      inventory.sort((a, b) => {
        if (a.location !== b.location) return a.location.localeCompare(b.location);
        if (a.unit_number !== b.unit_number) return a.unit_number.localeCompare(b.unit_number);
        return a.category.localeCompare(b.category);
      });
      
      tbody.innerHTML = inventory.map(i => {
        const statusColor = i.needs_refill ? '#fbbf24' : '#10b981';
        const statusBg = i.needs_refill ? '#fef3c7' : '#d1fae5';
        const statusText = i.needs_refill ? 'ÙŠØ­ØªØ§Ø¬ ØªØ¹Ø¨Ø¦Ø©' : 'Ù…ØªÙˆÙØ±';
        const categoryIcon = getCategoryIcon(i.category);
        
        return `
        <tr style="${i.needs_refill ? 'background: #fffbeb;' : ''}">
          <td>${i.location}</td>
          <td>${i.unit_number}</td>
          <td>${categoryIcon} ${i.category}</td>
          <td><strong>${i.item_name}</strong></td>
          <td><span style="font-size: 1.25rem; font-weight: bold; color: ${i.needs_refill ? '#dc2626' : '#059669'}">${i.current_quantity}</span></td>
          <td><span style="color: #6b7280;">${i.minimum_quantity}</span></td>
          <td><span class="status-badge" style="background: ${statusBg}; color: ${statusColor === '#fbbf24' ? '#92400e' : '#065f46'}">${statusText}</span></td>
          <td>
            <div style="display: flex; gap: 0.5rem;">
              <button class="btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="openUpdateQuantity('${i.__backendId}')">ØªØ­Ø¯ÙŠØ«</button>
              <button class="btn-danger" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="deleteInventory('${i.__backendId}')">Ø­Ø°Ù</button>
            </div>
          </td>
        </tr>
      `}).join('');
    }
    
    function getCategoryIcon(category) {
      const icons = {
        'Bedroom': 'ğŸ›ï¸',
        'Bathroom': 'ğŸš¿',
        'Kitchen': 'ğŸ½ï¸',
        'Cleaning Supplies': 'ğŸ§¼',
        'Guest Essentials': 'âœ¨'
      };
      return icons[category] || 'ğŸ“¦';
    }
    
    function updateFilterUnits() {
      const locationFilter = document.getElementById('filter-location').value;
      const unitFilter = document.getElementById('filter-unit');
      
      const inventory = allData.filter(d => d.type === 'inventory');
      let filteredInventory = inventory;
      
      if (locationFilter) {
        filteredInventory = inventory.filter(i => i.location === locationFilter);
      }
      
      const uniqueUnits = [...new Set(filteredInventory.map(i => i.unit_number))].sort();
      
      const currentValue = unitFilter.value;
      unitFilter.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ù‚Ù‚</option>' + 
        uniqueUnits.map(u => `<option value="${u}" ${u === currentValue ? 'selected' : ''}>${u}</option>`).join('');
    }
    
    function getBookingStatusBadge(status) {
      const colors = {
        'Upcoming': 'background: #dbeafe; color: #1e40af',
        'Checked-in': 'background: #d1fae5; color: #065f46',
        'Checked-out': 'background: #fef3c7; color: #92400e',
        'Cancelled': 'background: #fee2e2; color: #991b1b',
        'Completed': 'background: #e5e7eb; color: #374151'
      };
      return `<span class="status-badge" style="${colors[status] || ''}">${status}</span>`;
    }
    
    function getUnitStatusBadge(status) {
      const colors = {
        'Needs Cleaning': 'background: #fee2e2; color: #991b1b',
        'Cleaning': 'background: #fef3c7; color: #92400e',
        'Inspection': 'background: #dbeafe; color: #1e40af',
        'Ready': 'background: #d1fae5; color: #065f46',
        'Maintenance': 'background: #fce7f3; color: #831843'
      };
      return `<span class="status-badge" style="${colors[status] || ''}">${status}</span>`;
    }
    
    function getCleaningStatusBadge(status) {
      const colors = {
        'Pending': 'background: #fef3c7; color: #92400e',
        'In Progress': 'background: #dbeafe; color: #1e40af',
        'Done': 'background: #d1fae5; color: #065f46',
        'Approved': 'background: #e5e7eb; color: #374151'
      };
      return `<span class="status-badge" style="${colors[status] || ''}">${status}</span>`;
    }
    
    function openBookingModal() {
      document.getElementById('booking-modal').classList.add('active');
    }
    
    function openUnitModal() {
      document.getElementById('unit-modal').classList.add('active');
    }
    
    function openCleaningModal() {
      document.getElementById('cleaning-modal').classList.add('active');
    }
    
    function openInspectionModal() {
      document.getElementById('inspection-modal').classList.add('active');
    }
    
    function openInventoryModal() {
      document.getElementById('inventory-modal').classList.add('active');
    }
    
    function openSetupModal() {
      document.getElementById('setup-modal').classList.add('active');
    }
    
    let currentUpdateItem = null;
    
    function openUpdateQuantity(itemId) {
      const item = allData.find(d => d.__backendId === itemId);
      if (!item) return;
      
      currentUpdateItem = item;
      
      const infoDiv = document.getElementById('update-item-info');
      const categoryIcon = getCategoryIcon(item.category);
      infoDiv.innerHTML = `
        <div style="margin-bottom: 0.5rem;"><strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong> ${item.location}</div>
        <div style="margin-bottom: 0.5rem;"><strong>Ø§Ù„Ø´Ù‚Ø©:</strong> ${item.unit_number}</div>
        <div style="margin-bottom: 0.5rem;"><strong>Ø§Ù„ÙØ¦Ø©:</strong> ${categoryIcon} ${item.category}</div>
        <div style="margin-bottom: 0.5rem;"><strong>Ø§Ù„ØµÙ†Ù:</strong> ${item.item_name}</div>
        <div><strong>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</strong> <span style="font-size: 1.25rem; font-weight: bold; color: ${item.needs_refill ? '#dc2626' : '#059669'}">${item.current_quantity}</span></div>
      `;
      
      document.getElementById('new-quantity').value = item.current_quantity;
      document.getElementById('update-quantity-modal').classList.add('active');
    }
    
    async function saveQuantityUpdate(event) {
      event.preventDefault();
      
      if (!currentUpdateItem) return;
      
      const form = event.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...';
      
      const newQuantity = parseInt(document.getElementById('new-quantity').value);
      
      currentUpdateItem.current_quantity = newQuantity;
      currentUpdateItem.needs_refill = newQuantity < currentUpdateItem.minimum_quantity;
      
      const result = await window.dataSdk.update(currentUpdateItem);
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Ø­ÙØ¸';
      
      if (result.isOk) {
        showToast('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');
        closeModal('update-quantity-modal');
        currentUpdateItem = null;
      } else {
        showToast('ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ©');
      }
    }
    
    async function setupUnitInventory(event) {
      event.preventDefault();
      
      const form = event.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯...';
      
      const location = document.getElementById('setup-location').value;
      const unitNumber = document.getElementById('setup-unit').value;
      
      const standardItems = [
        { category: 'Bedroom', item: 'Bed Sheets Sets', current: 2, min: 2 },
        { category: 'Bedroom', item: 'Pillows', current: 4, min: 4 },
        { category: 'Bedroom', item: 'Extra Blanket', current: 1, min: 1 },
        { category: 'Bedroom', item: 'Hangers', current: 15, min: 10 },
        
        { category: 'Bathroom', item: 'Bath Towels', current: 4, min: 4 },
        { category: 'Bathroom', item: 'Hand Towels', current: 4, min: 4 },
        { category: 'Bathroom', item: 'Bath Mat', current: 2, min: 2 },
        { category: 'Bathroom', item: 'Shampoo Bottles', current: 2, min: 2 },
        { category: 'Bathroom', item: 'Conditioner Bottles', current: 2, min: 2 },
        { category: 'Bathroom', item: 'Hand Soap', current: 2, min: 2 },
        { category: 'Bathroom', item: 'Hair Dryer', current: 1, min: 1 },
        { category: 'Bathroom', item: 'Trash Bags Roll', current: 1, min: 1 },
        
        { category: 'Kitchen', item: 'Dinner Plates', current: 8, min: 8 },
        { category: 'Kitchen', item: 'Cups/Mugs', current: 8, min: 8 },
        { category: 'Kitchen', item: 'Cutlery Set', current: 8, min: 8 },
        { category: 'Kitchen', item: 'Cooking Pots', current: 2, min: 2 },
        { category: 'Kitchen', item: 'Frying Pan', current: 1, min: 1 },
        { category: 'Kitchen', item: 'Electric Kettle', current: 1, min: 1 },
        { category: 'Kitchen', item: 'Coffee Machine', current: 1, min: 1 },
        { category: 'Kitchen', item: 'Coffee Packs', current: 3, min: 2 },
        { category: 'Kitchen', item: 'Tea Bags Box', current: 1, min: 1 },
        { category: 'Kitchen', item: 'Sugar Pack', current: 1, min: 1 },
        
        { category: 'Cleaning Supplies', item: 'Floor Cleaner Bottle', current: 1, min: 1 },
        { category: 'Cleaning Supplies', item: 'Disinfectant Spray', current: 1, min: 1 },
        { category: 'Cleaning Supplies', item: 'Mop', current: 1, min: 1 },
        { category: 'Cleaning Supplies', item: 'Broom', current: 1, min: 1 },
        { category: 'Cleaning Supplies', item: 'Sponges Pack', current: 1, min: 1 },
        { category: 'Cleaning Supplies', item: 'Cleaning Gloves', current: 2, min: 2 },
        
        { category: 'Guest Essentials', item: 'Toilet Paper Rolls', current: 6, min: 4 },
        { category: 'Guest Essentials', item: 'Paper Towels Roll', current: 2, min: 2 },
        { category: 'Guest Essentials', item: 'Tissues Box', current: 2, min: 2 }
      ];
      
      const currentInventoryCount = allData.filter(d => d.type === 'inventory').length;
      if (currentInventoryCount + standardItems.length > 999) {
        showToast('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª - Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 999 ØµÙ†Ù');
        submitBtn.disabled = false;
        submitBtn.textContent = 'âš¡ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø´Ù‚Ø©';
        return;
      }
      
      let successCount = 0;
      for (const item of standardItems) {
        const inventoryData = {
          type: 'inventory',
          location: location,
          unit_number: unitNumber,
          category: item.category,
          item_name: item.item,
          current_quantity: item.current,
          minimum_quantity: item.min,
          needs_refill: item.current < item.min,
          timestamp: new Date().toISOString()
        };
        
        const result = await window.dataSdk.create(inventoryData);
        if (result.isOk) {
          successCount++;
        }
      }
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'âš¡ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø´Ù‚Ø©';
      
      if (successCount === standardItems.length) {
        showToast(`ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø´Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­! ØªÙ… Ø¥Ø¶Ø§ÙØ© ${successCount} ØµÙ†Ù`);
        closeModal('setup-modal');
        form.reset();
      } else if (successCount > 0) {
        showToast(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${successCount} Ù…Ù† ${standardItems.length} ØµÙ†Ù`);
      } else {
        showToast('ÙØ´Ù„ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø´Ù‚Ø©');
      }
    }
    
    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }
    
    async function saveBooking(event) {
      event.preventDefault();
      
      if (allData.filter(d => d.type === 'booking').length >= 999) {
        showToast("ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª (999)");
        return;
      }
      
      const form = event.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
      
      const bookingData = {
        type: 'booking',
        location: document.getElementById('booking-location').value,
        unit_number: document.getElementById('booking-unit').value,
        guest_name: document.getElementById('booking-guest').value,
        guest_phone: document.getElementById('booking-phone').value,
        guest_address: document.getElementById('booking-address').value || null,
        checkin_date: document.getElementById('booking-checkin-date').value,
        checkin_time: document.getElementById('booking-checkin-time').value,
        checkout_date: document.getElementById('booking-checkout-date').value,
        checkout_time: document.getElementById('booking-checkout-time').value,
        guest_count: parseInt(document.getElementById('booking-guests').value),
        booking_status: 'Upcoming',
        timestamp: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(bookingData);
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Ø­ÙØ¸';
      
      if (result.isOk) {
        showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­');
        closeModal('booking-modal');
        form.reset();
      } else {
        showToast('ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø­Ø¬Ø²');
      }
    }
    
    async function saveUnit(event) {
      event.preventDefault();
      
      if (allData.filter(d => d.type === 'unit').length >= 999) {
        showToast("ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ø´Ù‚Ù‚ (999)");
        return;
      }
      
      const form = event.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
      
      const unitData = {
        type: 'unit',
        location: document.getElementById('unit-location').value,
        unit_number: document.getElementById('unit-number').value,
        unit_type: document.getElementById('unit-type').value,
        unit_status: 'Ready',
        last_cleaning: new Date().toISOString().split('T')[0],
        timestamp: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(unitData);
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Ø­ÙØ¸';
      
      if (result.isOk) {
        showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­');
        closeModal('unit-modal');
        form.reset();
      } else {
        showToast('ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø´Ù‚Ø©');
      }
    }
    
    async function saveCleaning(event) {
      event.preventDefault();
      
      if (allData.filter(d => d.type === 'cleaning').length >= 999) {
        showToast("ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ†Ø¸ÙŠÙ (999)");
        return;
      }
      
      const form = event.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
      
      const cleaningData = {
        type: 'cleaning',
        location: document.getElementById('cleaning-location').value,
        unit_number: document.getElementById('cleaning-unit').value,
        cleaning_reason: document.getElementById('cleaning-reason').value,
        cleaning_date: document.getElementById('cleaning-date').value,
        start_time: document.getElementById('cleaning-start').value,
        end_time: document.getElementById('cleaning-end').value || null,
        cleaner_name: document.getElementById('cleaning-cleaner').value || null,
        cleaning_status: 'Pending',
        timestamp: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(cleaningData);
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Ø­ÙØ¸';
      
      if (result.isOk) {
        showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ø¨Ù†Ø¬Ø§Ø­');
        closeModal('cleaning-modal');
        form.reset();
      } else {
        showToast('ÙØ´Ù„ Ø­ÙØ¸ Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ');
      }
    }
    
    async function saveInspection(event) {
      event.preventDefault();
      
      if (allData.filter(d => d.type === 'inspection').length >= 999) {
        showToast("ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„ØªÙØªÙŠØ´Ø§Øª (999)");
        return;
      }
      
      const form = event.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
      
      const wifiOk = document.getElementById('inspection-wifi').checked;
      const cleanOk = document.getElementById('inspection-clean').checked;
      const suppliesOk = document.getElementById('inspection-supplies').checked;
      
      const inspectionData = {
        type: 'inspection',
        location: document.getElementById('inspection-location').value,
        unit_number: document.getElementById('inspection-unit').value,
        inspection_date: document.getElementById('inspection-date').value,
        wifi_ok: wifiOk,
        cleanliness_ok: cleanOk,
        supplies_ok: suppliesOk,
        inspection_notes: document.getElementById('inspection-notes').value || null,
        approved: wifiOk && cleanOk && suppliesOk,
        timestamp: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(inspectionData);
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Ø­ÙØ¸';
      
      if (result.isOk) {
        showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙØªÙŠØ´ Ø¨Ù†Ø¬Ø§Ø­');
        closeModal('inspection-modal');
        form.reset();
      } else {
        showToast('ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØªÙØªÙŠØ´');
      }
    }
    
    async function saveInventory(event) {
      event.preventDefault();
      
      if (allData.filter(d => d.type === 'inventory').length >= 999) {
        showToast("ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ø£ØµÙ†Ø§Ù (999)");
        return;
      }
      
      const form = event.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
      
      const current = parseInt(document.getElementById('inventory-current').value);
      const minimum = parseInt(document.getElementById('inventory-minimum').value);
      
      const inventoryData = {
        type: 'inventory',
        location: document.getElementById('inventory-location').value,
        unit_number: document.getElementById('inventory-unit').value,
        category: document.getElementById('inventory-category').value,
        item_name: document.getElementById('inventory-item').value,
        current_quantity: current,
        minimum_quantity: minimum,
        needs_refill: current < minimum,
        timestamp: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(inventoryData);
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Ø­ÙØ¸';
      
      if (result.isOk) {
        showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­');
        closeModal('inventory-modal');
        form.reset();
      } else {
        showToast('ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù');
      }
    }
    
    async function deleteBooking(id) {
      const booking = allData.find(d => d.__backendId === id);
      if (!booking) return;
      
      const result = await window.dataSdk.delete(booking);
      
      if (result.isOk) {
        showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø­Ø¬Ø²');
      } else {
        showToast('ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ø­Ø¬Ø²');
      }
    }
    
    async function deleteUnit(id) {
      const unit = allData.find(d => d.__backendId === id);
      if (!unit) return;
      
      const result = await window.dataSdk.delete(unit);
      
      if (result.isOk) {
        showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø´Ù‚Ø©');
      } else {
        showToast('ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ø´Ù‚Ø©');
      }
    }
    
    async function deleteCleaning(id) {
      const cleaning = allData.find(d => d.__backendId === id);
      if (!cleaning) return;
      
      const result = await window.dataSdk.delete(cleaning);
      
      if (result.isOk) {
        showToast('ØªÙ… Ø­Ø°Ù Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ');
      } else {
        showToast('ÙØ´Ù„ Ø­Ø°Ù Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ');
      }
    }
    
    async function deleteInspection(id) {
      const inspection = allData.find(d => d.__backendId === id);
      if (!inspection) return;
      
      const result = await window.dataSdk.delete(inspection);
      
      if (result.isOk) {
        showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªÙØªÙŠØ´');
      } else {
        showToast('ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„ØªÙØªÙŠØ´');
      }
    }
    
    async function deleteInventory(id) {
      const inventory = allData.find(d => d.__backendId === id);
      if (!inventory) return;
      
      const result = await window.dataSdk.delete(inventory);
      
      if (result.isOk) {
        showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙ†Ù');
      } else {
        showToast('ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„ØµÙ†Ù');
      }
    }
    
    function renderDelivery() {
      const deliveries = allData.filter(d => d.type === 'delivery');
      const tbody = document.getElementById('delivery-body');
      
      if (deliveries.length === 0) {
        tbody.innerHTML = '<tr><td colspan="11" style="text-align: center; color: #6b7280;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ØªÙˆØµÙŠÙ„</td></tr>';
        return;
      }
      
      deliveries.sort((a, b) => {
        if (a.delivery_status === 'Pending' && b.delivery_status !== 'Pending') return -1;
        if (a.delivery_status !== 'Pending' && b.delivery_status === 'Pending') return 1;
        return new Date(b.timestamp) - new Date(a.timestamp);
      });
      
      tbody.innerHTML = deliveries.map(d => `
        <tr>
          <td><strong>${d.customer_name}</strong></td>
          <td>${d.customer_phone}</td>
          <td>${d.location}</td>
          <td>${d.unit_number}</td>
          <td style="max-width: 200px; word-wrap: break-word;">${d.delivery_address || '-'}</td>
          <td>${d.checkin_date}</td>
          <td>${d.checkin_time}</td>
          <td>${d.checkout_date} ${d.checkout_time}</td>
          <td>${getDeliveryStatusBadge(d.delivery_status)}</td>
          <td style="max-width: 150px; word-wrap: break-word;">${d.delivery_notes || '-'}</td>
          <td>
            <div style="display: flex; gap: 0.5rem;">
              <button class="btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="editDelivery('${d.__backendId}')">ØªØ¹Ø¯ÙŠÙ„</button>
              <button class="btn-danger" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="deleteDelivery('${d.__backendId}')">Ø­Ø°Ù</button>
            </div>
          </td>
        </tr>
      `).join('');
      
      updateDeliveryBookingOptions();
    }
    
    function getDeliveryStatusBadge(status) {
      const colors = {
        'Pending': 'background: #fef3c7; color: #92400e',
        'Scheduled': 'background: #dbeafe; color: #1e40af',
        'In Transit': 'background: #fce7f3; color: #831843',
        'Delivered': 'background: #d1fae5; color: #065f46',
        'Cancelled': 'background: #fee2e2; color: #991b1b'
      };
      const labels = {
        'Pending': 'â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',
        'Scheduled': 'ğŸ“… Ù…Ø¬Ø¯ÙˆÙ„',
        'In Transit': 'ğŸšš Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„',
        'Delivered': 'âœ… ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„',
        'Cancelled': 'âŒ Ù…Ù„ØºÙŠ'
      };
      return `<span class="status-badge" style="${colors[status] || ''}">${labels[status] || status}</span>`;
    }
    
    function updateDeliveryBookingOptions() {
      const bookingSelect = document.getElementById('delivery-booking');
      if (!bookingSelect) return;
      
      const bookings = allData.filter(d => d.type === 'booking');
      bookingSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø­Ø¬Ø² (Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙŠØ¯)</option>' + 
        bookings.map(b => `<option value="${b.__backendId}">${b.guest_name} - ${b.location} ${b.unit_number} (${b.checkin_date})</option>`).join('');
    }
    
    function fillDeliveryFromBooking() {
      const bookingId = document.getElementById('delivery-booking').value;
      if (!bookingId) return;
      
      const booking = allData.find(d => d.__backendId === bookingId);
      if (!booking) return;
      
      document.getElementById('delivery-name').value = booking.guest_name || '';
      document.getElementById('delivery-phone').value = booking.guest_phone || '';
      document.getElementById('delivery-location').value = booking.location || '';
      document.getElementById('delivery-unit').value = booking.unit_number || '';
      document.getElementById('delivery-address').value = booking.guest_address || '';
      document.getElementById('delivery-checkin-date').value = booking.checkin_date || '';
      document.getElementById('delivery-checkin-time').value = booking.checkin_time || '';
      document.getElementById('delivery-checkout-date').value = booking.checkout_date || '';
      document.getElementById('delivery-checkout-time').value = booking.checkout_time || '';
    }
    
    function openDeliveryModal() {
      updateDeliveryBookingOptions();
      document.getElementById('delivery-form').reset();
      document.getElementById('delivery-booking').value = '';
      document.getElementById('delivery-modal').classList.add('active');
    }
    
    let currentEditDelivery = null;
    
    function editDelivery(id) {
      const delivery = allData.find(d => d.__backendId === id);
      if (!delivery) return;
      
      currentEditDelivery = delivery;
      updateDeliveryBookingOptions();
      
      document.getElementById('delivery-name').value = delivery.customer_name || '';
      document.getElementById('delivery-phone').value = delivery.customer_phone || '';
      document.getElementById('delivery-location').value = delivery.location || '';
      document.getElementById('delivery-unit').value = delivery.unit_number || '';
      document.getElementById('delivery-address').value = delivery.delivery_address || '';
      document.getElementById('delivery-checkin-date').value = delivery.checkin_date || '';
      document.getElementById('delivery-checkin-time').value = delivery.checkin_time || '';
      document.getElementById('delivery-checkout-date').value = delivery.checkout_date || '';
      document.getElementById('delivery-checkout-time').value = delivery.checkout_time || '';
      document.getElementById('delivery-status').value = delivery.delivery_status || 'Pending';
      document.getElementById('delivery-notes').value = delivery.delivery_notes || '';
      document.getElementById('delivery-booking').value = '';
      
      document.getElementById('delivery-modal').classList.add('active');
    }
    
    async function saveDelivery(event) {
      event.preventDefault();
      
      if (allData.filter(d => d.type === 'delivery').length >= 999 && !currentEditDelivery) {
        showToast("ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ (999)");
        return;
      }
      
      const form = event.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
      
      const deliveryData = {
        type: 'delivery',
        customer_name: document.getElementById('delivery-name').value,
        customer_phone: document.getElementById('delivery-phone').value,
        location: document.getElementById('delivery-location').value,
        unit_number: document.getElementById('delivery-unit').value,
        delivery_address: document.getElementById('delivery-address').value,
        checkin_date: document.getElementById('delivery-checkin-date').value,
        checkin_time: document.getElementById('delivery-checkin-time').value,
        checkout_date: document.getElementById('delivery-checkout-date').value,
        checkout_time: document.getElementById('delivery-checkout-time').value,
        delivery_status: document.getElementById('delivery-status').value,
        delivery_notes: document.getElementById('delivery-notes').value || null,
        booking_id: document.getElementById('delivery-booking').value || null,
        timestamp: new Date().toISOString()
      };
      
      let result;
      if (currentEditDelivery) {
        deliveryData.__backendId = currentEditDelivery.__backendId;
        result = await window.dataSdk.update(deliveryData);
      } else {
        result = await window.dataSdk.create(deliveryData);
      }
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Ø­ÙØ¸';
      
      if (result.isOk) {
        showToast(currentEditDelivery ? 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­' : 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');
        closeModal('delivery-modal');
        form.reset();
        currentEditDelivery = null;
      } else {
        showToast('ÙØ´Ù„ Ø­ÙØ¸ Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„');
      }
    }
    
    async function deleteDelivery(id) {
      const delivery = allData.find(d => d.__backendId === id);
      if (!delivery) return;
      
      if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„ØŸ')) return;
      
      const result = await window.dataSdk.delete(delivery);
      
      if (result.isOk) {
        showToast('ØªÙ… Ø­Ø°Ù Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„');
      } else {
        showToast('ÙØ´Ù„ Ø­Ø°Ù Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„');
      }
    }
    
    function showToast(message) {
      const existingToast = document.querySelector('.toast');
      if (existingToast) {
        existingToast.remove();
      }
      
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.remove();
      }, 3000);
    }
    
    init();
  </script>
 </body>
</html>

